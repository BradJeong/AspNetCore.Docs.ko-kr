---
title: "IIS에서 ASP.NET Core 문제 해결"
author: guardrex
description: "ASP.NET Core 응용 프로그램의 IIS 배포와 문제를 진단 하는 방법을 알아봅니다."
ms.author: riande
manager: wpickett
ms.custom: mvc
ms.date: 03/13/2017
ms.topic: article
ms.technology: aspnet
ms.prod: asp.net-core
uid: host-and-deploy/iis/troubleshoot
ms.openlocfilehash: 2e42d5904e2be8c031c5c6d4bbc104a251b699f2
ms.sourcegitcommit: 12e5194936b7e820efc5505a2d5d4f84e88eb5ef
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 01/11/2018
---
# <a name="troubleshoot-aspnet-core-on-iis"></a><span data-ttu-id="1dd1d-103">IIS에서 ASP.NET Core 문제 해결</span><span class="sxs-lookup"><span data-stu-id="1dd1d-103">Troubleshoot ASP.NET Core on IIS</span></span>

<span data-ttu-id="1dd1d-104">[Luke Latham](https://github.com/guardrex)으로</span><span class="sxs-lookup"><span data-stu-id="1dd1d-104">By [Luke Latham](https://github.com/guardrex)</span></span>

<span data-ttu-id="1dd1d-105">문제를 진단 하려면 IIS 배포:</span><span class="sxs-lookup"><span data-stu-id="1dd1d-105">To diagnose issues with IIS deployments:</span></span>

* <span data-ttu-id="1dd1d-106">브라우저 출력을 검토합니다.</span><span class="sxs-lookup"><span data-stu-id="1dd1d-106">Study browser output.</span></span>
* <span data-ttu-id="1dd1d-107">**이벤트 뷰어**를 통해 시스템의 **응용 프로그램** 로그를 검사합니다.</span><span class="sxs-lookup"><span data-stu-id="1dd1d-107">Examine the system's **Application** log through **Event Viewer**.</span></span>
* <span data-ttu-id="1dd1d-108">`stdout` 로깅을 사용하도록 설정합니다.</span><span class="sxs-lookup"><span data-stu-id="1dd1d-108">Enable `stdout` logging.</span></span> <span data-ttu-id="1dd1d-109">**ASP.NET Core 모듈** 로그는 *web.config*에 있는 `<aspNetCore>` 요소의 *stdoutLogFile* 특성에 제공된 경로에 있습니다. 특성 값에 제공된 경로의 모든 폴더가 배포에 있어야 합니다.</span><span class="sxs-lookup"><span data-stu-id="1dd1d-109">The **ASP.NET Core Module** log is found on the path provided in the *stdoutLogFile* attribute of the `<aspNetCore>` element in *web.config*. Any folders on the path provided in the attribute value must exist in the deployment.</span></span> <span data-ttu-id="1dd1d-110">설정 *stdoutLogEnabled* 를 `true`합니다.</span><span class="sxs-lookup"><span data-stu-id="1dd1d-110">Set *stdoutLogEnabled* to `true`.</span></span> <span data-ttu-id="1dd1d-111">사용 하는 앱의는 `Microsoft.NET.Sdk.Web` SDK를 만들려면는 *web.config* 기본 파일는 *stdoutLogEnabled* 설정을 `false`수동으로 제공는 *web.config* 파일 또는 파일을 사용할 수 있도록 수정 `stdout` 로깅.</span><span class="sxs-lookup"><span data-stu-id="1dd1d-111">Apps that use the the `Microsoft.NET.Sdk.Web` SDK to create the *web.config* file default the *stdoutLogEnabled* setting to `false`, so manually provide the *web.config* file or modify the file in order to enable `stdout` logging.</span></span>

<span data-ttu-id="1dd1d-112">이러한 세 가지 소스에서 정보를 사용 하 여는 [항목을 참조 하는 일반적인 오류](xref:host-and-deploy/azure-iis-errors-reference) 문제를 확인 하려면.</span><span class="sxs-lookup"><span data-stu-id="1dd1d-112">Use information from those three sources with the [common errors reference topic](xref:host-and-deploy/azure-iis-errors-reference) to determine the problem.</span></span> <span data-ttu-id="1dd1d-113">문제를 해결 하려면 제공 된 문제 해결 지시를 따릅니다.</span><span class="sxs-lookup"><span data-stu-id="1dd1d-113">Follow the troubleshooting advice provided to resolve the issue.</span></span>

<span data-ttu-id="1dd1d-114">*startupTimeLimit*(기본값: 120초) 및 *startupRetryCount*(기본값: 2) 모듈이 통과할 때까지 일반적인 몇 가지 오류는 브라우저, 응용 프로그램 로그 및 ASP.NET Core 모듈 로그에 표시되지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="1dd1d-114">Several of the common errors don't appear in the browser, Application Log, and ASP.NET Core Module Log until the module *startupTimeLimit* (default: 120 seconds) and *startupRetryCount* (default: 2) have passed.</span></span> <span data-ttu-id="1dd1d-115">따라서 모듈에서 앱의 프로세스를 시작하지 못했다고 추론될 때까지 6분 정도 기다립니다.</span><span class="sxs-lookup"><span data-stu-id="1dd1d-115">Therefore, wait a full six minutes before deducing that the module has failed to start a process for the app.</span></span>

<span data-ttu-id="1dd1d-116">앱이 제대로 작동하는지 확인하는 빠른 방법은 Kestrel에서 직접 앱을 실행하는 것입니다.</span><span class="sxs-lookup"><span data-stu-id="1dd1d-116">One quick way to determine if the app is working properly is to run the app directly on Kestrel.</span></span> <span data-ttu-id="1dd1d-117">응용 프로그램으로 게시 된 경우는 [프레임 워크 종속 배포](/dotnet/core/deploying/#framework-dependent-deployments-fdd), 실행 `dotnet <assembly_name>.dll` 배포 폴더에 있는 가장 응용 프로그램에 IIS 실제 경로입니다.</span><span class="sxs-lookup"><span data-stu-id="1dd1d-117">If the app was published as a [framework-dependent deployment](/dotnet/core/deploying/#framework-dependent-deployments-fdd), execute `dotnet <assembly_name>.dll` in the deployment folder, which is the IIS physical path to the app.</span></span> <span data-ttu-id="1dd1d-118">응용 프로그램으로 게시 된 경우는 [자체 포함된 배포](/dotnet/core/deploying/#self-contained-deployments-scd)실행, 응용 프로그램의 명령 프롬프트에서 직접 실행 파일 `<assembly_name>.exe`, 배포 폴더에 있습니다.</span><span class="sxs-lookup"><span data-stu-id="1dd1d-118">If the app was published as a [self-contained deployment](/dotnet/core/deploying/#self-contained-deployments-scd), run the app's executable directly from a command prompt, `<assembly_name>.exe`, in the deployment folder.</span></span> <span data-ttu-id="1dd1d-119">응용 프로그램에서 사용할 수 있어야 Kestrel 5000 기본 포트에서 수신 하는 경우 `http://localhost:5000/`합니다.</span><span class="sxs-lookup"><span data-stu-id="1dd1d-119">If Kestrel is listening on default port 5000, the app should be available at `http://localhost:5000/`.</span></span> <span data-ttu-id="1dd1d-120">응용 프로그램 Kestrel 끝점 주소에서 정상적으로 응답을 하는 경우 문제가 관련 역방향 프록시 구성 및 응용 프로그램 내에서 될 가능성이 적기 가능성이 큽니다.</span><span class="sxs-lookup"><span data-stu-id="1dd1d-120">If the app responds normally at the Kestrel endpoint address, the problem is more likely related to the reverse proxy configuration and less likely within the app.</span></span>

<span data-ttu-id="1dd1d-121">스타일 시트, 스크립트 또는 응용 프로그램의 정적 파일에서 이미지에 대 한 간단한 정적 파일 요청을 수행 하는 역방향 프록시 제대로 작동 하는지 확인 하는 한 가지 방법은 *wwwroot* 를 사용 하 여 [정적 파일 미들웨어](xref:fundamentals/static-files).</span><span class="sxs-lookup"><span data-stu-id="1dd1d-121">One way to determine if the reverse proxy is working properly is to perform a simple static file request for a stylesheet, script, or image from the app's static files in *wwwroot* using [Static File Middleware](xref:fundamentals/static-files).</span></span> <span data-ttu-id="1dd1d-122">를 앱에는 정적 파일 사용 될 수 있습니다 하지만 MVC 뷰 및 기타 끝점에서 실패 하는 경우 역방향 프록시 구성에 관련 될 가능성이 적기 및 더 (예, MVC 라우팅 또는 500 내부 서버 오류)에 앱 내에서 가능성이 가장 높은 문제가입니다.</span><span class="sxs-lookup"><span data-stu-id="1dd1d-122">If the app can serve static files but MVC Views and other endpoints are failing, the problem is less likely related to the reverse proxy configuration and more likely within the app (for example, MVC routing or 500 Internal Server Error).</span></span>

<span data-ttu-id="1dd1d-123">에 환경 변수를 일시적으로 추가할 수 Kestrel IIS 뒤 정상적으로 시작 하는 경우 응용 프로그램은 성공적으로 로컬로 실행 한 후 시스템에서 실행 되지 않습니다 *web.config* 설정 하는 `ASPNETCORE_ENVIRONMENT` 를 `Development`합니다.</span><span class="sxs-lookup"><span data-stu-id="1dd1d-123">When Kestrel starts normally behind IIS but the app won't run on the system after successfully running locally, an environment variable can be temporarily added to *web.config* to set the `ASPNETCORE_ENVIRONMENT` to `Development`.</span></span> <span data-ttu-id="1dd1d-124">환경 응용 프로그램 시작을 재정의 하지으로 환경 변수 설정 수 있습니다는 [개발자 예외 페이지](xref:fundamentals/error-handling) 표시할 때 앱이 실행 합니다.</span><span class="sxs-lookup"><span data-stu-id="1dd1d-124">As long as the environment isn't overridden in app startup, setting the environment variable allows the [developer exception page](xref:fundamentals/error-handling) to appear when the app is run.</span></span> <span data-ttu-id="1dd1d-125">에 대 한 환경 변수를 설정 `ASPNETCORE_ENVIRONMENT` 이렇게에서만 권장 됩니다는 노출 되지 않습니다 준비/테스트 서버에 대 한 인터넷에 있습니다.</span><span class="sxs-lookup"><span data-stu-id="1dd1d-125">Setting the environment variable for `ASPNETCORE_ENVIRONMENT` in this way is only recommended for staging/testing servers that aren't exposed to the Internet.</span></span> <span data-ttu-id="1dd1d-126">환경 변수를 제거 해야는 *web.config* 완료 되 면 파일입니다.</span><span class="sxs-lookup"><span data-stu-id="1dd1d-126">Be sure to remove the environment variable from the *web.config* file when finished.</span></span> <span data-ttu-id="1dd1d-127">통해 환경 변수 설정에 대 한 내용은 *web.config*, 참조 [aspNetCore의 자식 요소 environmentVariables](xref:host-and-deploy/aspnet-core-module#setting-environment-variables)합니다.</span><span class="sxs-lookup"><span data-stu-id="1dd1d-127">For information on setting environment variables via *web.config*, see [environmentVariables child element of aspNetCore](xref:host-and-deploy/aspnet-core-module#setting-environment-variables).</span></span>

<span data-ttu-id="1dd1d-128">응용 프로그램 로깅을 사용하면 대부분의 경우에서 앱 또는 역방향 프록시 문제를 해결하는 데 도움이 됩니다.</span><span class="sxs-lookup"><span data-stu-id="1dd1d-128">In most cases, enabling application logging assists in troubleshooting problems with the app or the reverse proxy.</span></span> <span data-ttu-id="1dd1d-129">자세한 내용은 [로깅](xref:fundamentals/logging/index)을 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="1dd1d-129">See [Logging](xref:fundamentals/logging/index) for more information.</span></span>

<span data-ttu-id="1dd1d-130">마지막 문제 해결 팁 app 내에서 개발 컴퓨터 또는 패키지 버전에서.NET Core SDK 중 하나를 업그레이드 한 후 실행 되지 않은 응용 프로그램에 적용 됩니다.</span><span class="sxs-lookup"><span data-stu-id="1dd1d-130">The last troubleshooting tip pertains to apps that fail to run after upgrading either the .NET Core SDK on the development machine or package versions within the app.</span></span> <span data-ttu-id="1dd1d-131">경우에 따라 중요한 업그레이드를 수행할 때 일관되지 않은 패키지로 인해 응용 프로그램이 중단될 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="1dd1d-131">In some cases, incoherent packages may break an app when performing major upgrades.</span></span> <span data-ttu-id="1dd1d-132">이러한 문제를 대부분 해결할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="1dd1d-132">Most of these issues can be fixed by:</span></span>

* <span data-ttu-id="1dd1d-133">삭제 된 `bin` 및 `obj` 프로젝트의 폴더입니다.</span><span class="sxs-lookup"><span data-stu-id="1dd1d-133">Deleting the `bin` and `obj` folders in the project.</span></span>
* <span data-ttu-id="1dd1d-134">캐시 지우기 패키지 `%UserProfile%\.nuget\packages\` 및 `%LocalAppData%\Nuget\v3-cache`합니다.</span><span class="sxs-lookup"><span data-stu-id="1dd1d-134">Clearing package caches at `%UserProfile%\.nuget\packages\` and `%LocalAppData%\Nuget\v3-cache`.</span></span>
* <span data-ttu-id="1dd1d-135">복원 및 프로젝트를 다시 작성 합니다.</span><span class="sxs-lookup"><span data-stu-id="1dd1d-135">Restoring and rebuilding the project.</span></span>
* <span data-ttu-id="1dd1d-136">서버에서 이전 배포를 다시 앱을 배포 하기 전에 완전히 삭제 되었는지 확인 합니다.</span><span class="sxs-lookup"><span data-stu-id="1dd1d-136">Confirming that the prior deployment on the server has been completely deleted prior to re-deploying the app.</span></span>

> [!TIP]
> <span data-ttu-id="1dd1d-137">패키지 캐시의 선택을 취소 하는 편리한 방법을 실행 하는 것 `dotnet nuget locals all --clear` 명령 프롬프트에서 합니다.</span><span class="sxs-lookup"><span data-stu-id="1dd1d-137">A convenient way to clear package caches is to execute `dotnet nuget locals all --clear` from a command prompt.</span></span>
> 
> <span data-ttu-id="1dd1d-138">패키지 캐시를 지우기 수행할 수도 있습니다를 사용 하 여는 [nuget.exe](https://www.nuget.org/downloads) 도구 및 명령 실행 `nuget locals all -clear`합니다.</span><span class="sxs-lookup"><span data-stu-id="1dd1d-138">Clearing package caches can also be accomplished by using the [nuget.exe](https://www.nuget.org/downloads) tool and executing the command `nuget locals all -clear`.</span></span> <span data-ttu-id="1dd1d-139">*nuget.exe* NuGet 웹 사이트에서 별도로 구입 해야 하 고 Windows 10과 함께 제공 되는 설치 되지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="1dd1d-139">*nuget.exe* isn't a bundled install with Windows 10 and must be obtained separately from the NuGet website.</span></span>
<!--
> [!TIP]
> A convenient way to clear package caches is to:
>
> * Obtain the *NuGet.exe* tool from [NuGet.org](https://www.nuget.org/).
> * Add the path to *NuGet.exe* to the system PATH.
> * Execute `nuget locals all -clear` from a command prompt.
>
> Alternatively, execute `dotnet nuget locals all --clear` from a command prompt without obtaining *NuGet.exe*. -->

## <a name="additional-resources"></a><span data-ttu-id="1dd1d-140">추가 리소스</span><span class="sxs-lookup"><span data-stu-id="1dd1d-140">Additional resources</span></span>

* [<span data-ttu-id="1dd1d-141">ASP.NET Core를 사용하는 Azure App Service 및 IIS에 대한 일반적인 오류 참조</span><span class="sxs-lookup"><span data-stu-id="1dd1d-141">Common errors reference for Azure App Service and IIS with ASP.NET Core</span></span>](xref:host-and-deploy/azure-iis-errors-reference)
* [<span data-ttu-id="1dd1d-142">ASP.NET Core 모듈 구성 참조</span><span class="sxs-lookup"><span data-stu-id="1dd1d-142">ASP.NET Core Module configuration reference</span></span>](xref:host-and-deploy/aspnet-core-module)
