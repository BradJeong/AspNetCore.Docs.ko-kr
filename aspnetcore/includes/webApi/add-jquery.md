## <a name="call-the-web-api-with-jquery"></a><span data-ttu-id="ab65f-101">jQuery를 사용하여 Web API 호출</span><span class="sxs-lookup"><span data-stu-id="ab65f-101">Call the Web API with jQuery</span></span>

<span data-ttu-id="ab65f-102">이 섹션에서는 jQuery를 사용하여 Web API를 호출하는 HTML 페이지가 추가되었습니다.</span><span class="sxs-lookup"><span data-stu-id="ab65f-102">In this section, an HTML page is added that uses jQuery to call the Web API.</span></span> <span data-ttu-id="ab65f-103">jQuery는 요청을 시작하고 API 응답의 세부 정보로 페이지를 업데이트합니다.</span><span class="sxs-lookup"><span data-stu-id="ab65f-103">jQuery initiates the request and updates the page with the details from the API's response.</span></span>

<span data-ttu-id="ab65f-104">정적 파일을 제공하고 기본 파일 매핑을 사용하도록 프로젝트를 구성합니다.</span><span class="sxs-lookup"><span data-stu-id="ab65f-104">Configure the project to serve static files and to enable default file mapping.</span></span> <span data-ttu-id="ab65f-105">이는 *Startup.Configure*에서 [UseStaticFiles](/dotnet/api/microsoft.aspnetcore.builder.staticfileextensions.usestaticfiles#Microsoft_AspNetCore_Builder_StaticFileExtensions_UseStaticFiles_Microsoft_AspNetCore_Builder_IApplicationBuilder_) 및 [UseDefaultFiles](/dotnet/api/microsoft.aspnetcore.builder.defaultfilesextensions.usedefaultfiles#Microsoft_AspNetCore_Builder_DefaultFilesExtensions_UseDefaultFiles_Microsoft_AspNetCore_Builder_IApplicationBuilder_) 확장 메서드를 호출하여 수행됩니다.</span><span class="sxs-lookup"><span data-stu-id="ab65f-105">This is accomplished by invoking the [UseStaticFiles](/dotnet/api/microsoft.aspnetcore.builder.staticfileextensions.usestaticfiles#Microsoft_AspNetCore_Builder_StaticFileExtensions_UseStaticFiles_Microsoft_AspNetCore_Builder_IApplicationBuilder_) and [UseDefaultFiles](/dotnet/api/microsoft.aspnetcore.builder.defaultfilesextensions.usedefaultfiles#Microsoft_AspNetCore_Builder_DefaultFilesExtensions_UseDefaultFiles_Microsoft_AspNetCore_Builder_IApplicationBuilder_) extension methods in *Startup.Configure*.</span></span> <span data-ttu-id="ab65f-106">자세한 내용은 [ASP.NET Core에서 정적 파일 작업](xref:fundamentals/static-files)을 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="ab65f-106">For more information, see [Work with static files in ASP.NET Core](xref:fundamentals/static-files).</span></span>

[!code-csharp[](../../tutorials/first-web-api/samples/2.0/TodoApi/Startup2.cs?name=snippet_Configure&highlight=3-4)]

<span data-ttu-id="ab65f-107">*index.html*이라는 HTML 파일을 해당 프로젝트의 *wwwroot* 디렉터리에 추가합니다.</span><span class="sxs-lookup"><span data-stu-id="ab65f-107">Add an HTML file, named *index.html*, to the project's *wwwroot* directory.</span></span> <span data-ttu-id="ab65f-108">다음 표시로 콘텐츠를 바꿉니다.</span><span class="sxs-lookup"><span data-stu-id="ab65f-108">Replace its contents with the following markup:</span></span>

[!code-html[](../../tutorials/first-web-api/samples/2.0/TodoApi/wwwroot/index.html)]

<span data-ttu-id="ab65f-109">*site.js*라는 JavaScript 파일을 해당 프로젝트의 *wwwroot* 디렉터리에 추가합니다.</span><span class="sxs-lookup"><span data-stu-id="ab65f-109">Add a JavaScript file, named *site.js*, to the project's *wwwroot* directory.</span></span> <span data-ttu-id="ab65f-110">다음 코드로 콘텐츠를 바꿉니다.</span><span class="sxs-lookup"><span data-stu-id="ab65f-110">Replace its contents with the following code:</span></span>

[!code-javascript[](../../tutorials/first-web-api/samples/2.0/TodoApi/wwwroot/site.js?name=snippet_SiteJs)]

<span data-ttu-id="ab65f-111">HTML 페이지를 로컬에서 테스트하려면 ASP.NET Core 프로젝트의 시작 설정을 변경해야 할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="ab65f-111">A change to the ASP.NET Core project's launch settings may be required to test the HTML page locally.</span></span> <span data-ttu-id="ab65f-112">프로젝트의 *속성* 디렉터리에서 *launchSettings.json*을 엽니다.</span><span class="sxs-lookup"><span data-stu-id="ab65f-112">Open *launchSettings.json* in the *Properties* directory of the project.</span></span> <span data-ttu-id="ab65f-113">`launchUrl` 속성을 제거하여 앱이 *index.html*&mdash; 프로젝트의 기본 파일에서 열리도록 합니다.</span><span class="sxs-lookup"><span data-stu-id="ab65f-113">Remove the `launchUrl` property to force the app to open at *index.html*&mdash;the project's default file.</span></span>

<span data-ttu-id="ab65f-114">여러 가지 방법으로 jQuery를 가져올 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="ab65f-114">There are several ways to get jQuery.</span></span> <span data-ttu-id="ab65f-115">위의 코드 조각에서 라이브러리는 CDN에서 로드됩니다.</span><span class="sxs-lookup"><span data-stu-id="ab65f-115">In the preceding snippet, the library is loaded from a CDN.</span></span> <span data-ttu-id="ab65f-116">이 샘플은 jQuery를 사용하여 API를 호출하는 완전한 CRUD 예제입니다.</span><span class="sxs-lookup"><span data-stu-id="ab65f-116">This sample is a complete CRUD example of calling the API with jQuery.</span></span> <span data-ttu-id="ab65f-117">이 샘플에는 경험을 풍부하게 하는 추가 기능이 있습니다.</span><span class="sxs-lookup"><span data-stu-id="ab65f-117">There are additional features in this sample to make the experience richer.</span></span> <span data-ttu-id="ab65f-118">다음은 API 호출에 대한 설명입니다.</span><span class="sxs-lookup"><span data-stu-id="ab65f-118">Below are explanations around the calls to the API.</span></span>

### <a name="get-a-list-of-to-do-items"></a><span data-ttu-id="ab65f-119">할 일 항목의 목록 가져오기</span><span class="sxs-lookup"><span data-stu-id="ab65f-119">Get a list of to-do items</span></span>

<span data-ttu-id="ab65f-120">할 일 항목의 목록을 가져오려면 HTTP GET 요청을 */api/todo*에 보냅니다.</span><span class="sxs-lookup"><span data-stu-id="ab65f-120">To get a list of to-do items, send an HTTP GET request to */api/todo*.</span></span>

<span data-ttu-id="ab65f-121">jQuery [ajax](https://api.jquery.com/jquery.ajax/) 함수는 개체 또는 배열을 나타내는 JSON을 반환하는 API에 AJAX 요청을 보냅니다.</span><span class="sxs-lookup"><span data-stu-id="ab65f-121">The jQuery [ajax](https://api.jquery.com/jquery.ajax/) function sends an AJAX request to the API, which returns JSON representing an object or array.</span></span> <span data-ttu-id="ab65f-122">이 함수는 HTTP 요청을 지정된 `url`로 보내는 모든 형태의 HTTP 상호 작용을 처리할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="ab65f-122">This function can handle all forms of HTTP interaction, sending an HTTP request to the specified `url`.</span></span> <span data-ttu-id="ab65f-123">`GET`이 `type`으로 사용됩니다.</span><span class="sxs-lookup"><span data-stu-id="ab65f-123">`GET` is used as the `type`.</span></span> <span data-ttu-id="ab65f-124">요청이 성공하면 `success` 콜백 함수가 호출됩니다.</span><span class="sxs-lookup"><span data-stu-id="ab65f-124">The `success` callback function is invoked if the request succeeds.</span></span> <span data-ttu-id="ab65f-125">콜백에서 DOM은 할 일 정보로 업데이트됩니다.</span><span class="sxs-lookup"><span data-stu-id="ab65f-125">In the callback, the DOM is updated with the to-do information.</span></span>

[!code-javascript[](../../tutorials/first-web-api/samples/2.0/TodoApi/wwwroot/site.js?name=snippet_GetData)]

### <a name="add-a-to-do-item"></a><span data-ttu-id="ab65f-126">할 일 항목 추가</span><span class="sxs-lookup"><span data-stu-id="ab65f-126">Add a to-do item</span></span>

<span data-ttu-id="ab65f-127">할 일 항목을 추가하려면 HTTP POST 요청을 */api/todo/* 에 보냅니다.</span><span class="sxs-lookup"><span data-stu-id="ab65f-127">To add a to-do item, send an HTTP POST request to */api/todo/*.</span></span> <span data-ttu-id="ab65f-128">요청 본문은 할 일 개체를 포함해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="ab65f-128">The request body should contain a to-do object.</span></span> <span data-ttu-id="ab65f-129">[ajax](https://api.jquery.com/jquery.ajax/) 함수는 `POST`를 사용하여 API를 호출합니다.</span><span class="sxs-lookup"><span data-stu-id="ab65f-129">The [ajax](https://api.jquery.com/jquery.ajax/) function is using `POST` to call the API.</span></span> <span data-ttu-id="ab65f-130">`POST` 및 `PUT` 요청의 경우, 요청 본문은 API에 전송되는 데이터를 나타냅니다.</span><span class="sxs-lookup"><span data-stu-id="ab65f-130">For `POST` and `PUT` requests, the request body represents the data sent to the API.</span></span> <span data-ttu-id="ab65f-131">API는 JSON 요청 본문을 요구합니다.</span><span class="sxs-lookup"><span data-stu-id="ab65f-131">The API is expecting a JSON request body.</span></span> <span data-ttu-id="ab65f-132">`accepts` 및 `contentType` 옵션은 수신 및 전송되는 미디어 유형을 각각 분류하기 위해 `application/json`으로 설정됩니다.</span><span class="sxs-lookup"><span data-stu-id="ab65f-132">The `accepts` and `contentType` options are set to `application/json` to classify the media type being received and sent, respectively.</span></span> <span data-ttu-id="ab65f-133">데이터는 [`JSON.stringify`](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/JSON/stringify)를 사용하여 JSON 개체로 변환됩니다.</span><span class="sxs-lookup"><span data-stu-id="ab65f-133">The data is converted to a JSON object using [`JSON.stringify`](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/JSON/stringify).</span></span> <span data-ttu-id="ab65f-134">API가 성공적인 상태 코드를 반환하면 `getData` 함수가 호출되어 HTML 테이블을 업데이트합니다.</span><span class="sxs-lookup"><span data-stu-id="ab65f-134">When the API returns a successful status code, the `getData` function is invoked to update the HTML table.</span></span>

[!code-javascript[](../../tutorials/first-web-api/samples/2.0/TodoApi/wwwroot/site.js?name=snippet_AddItem)]

### <a name="update-a-to-do-item"></a><span data-ttu-id="ab65f-135">할 일 항목 업데이트</span><span class="sxs-lookup"><span data-stu-id="ab65f-135">Update a to-do item</span></span>

<span data-ttu-id="ab65f-136">할 일 항목을 업데이트하는 것은 할 일 항목을 추가하는 것과 매우 유사합니다. 두 작업 모두 요청 본문에 의존하기 때문입니다.</span><span class="sxs-lookup"><span data-stu-id="ab65f-136">Updating a to-do item is very similar to adding one, since both rely on a request body.</span></span> <span data-ttu-id="ab65f-137">이 경우 두 작업의 유일한 차이점은 항목의 고유 식별자를 추가하기 위해 `url`이 변경되고, `type`은 `PUT`입니다.</span><span class="sxs-lookup"><span data-stu-id="ab65f-137">The only real difference between the two in this case is that the `url` changes to add the unique identifier of the item, and the `type` is `PUT`.</span></span>

[!code-javascript[](../../tutorials/first-web-api/samples/2.0/TodoApi/wwwroot/site.js?name=snippet_AjaxPut)]

### <a name="delete-a-to-do-item"></a><span data-ttu-id="ab65f-138">할 일 항목 삭제</span><span class="sxs-lookup"><span data-stu-id="ab65f-138">Delete a to-do item</span></span>

<span data-ttu-id="ab65f-139">할 일 항목을 삭제하려면 AJAX 호출에서 `type`을 `DELETE`로 설정하고 URL에서 항목의 고유 식별자를 지정하면 됩니다.</span><span class="sxs-lookup"><span data-stu-id="ab65f-139">Deleting a to-do item is accomplished by setting the `type` on the AJAX call to `DELETE` and specifing the item's unique identifier in the URL.</span></span>

[!code-javascript[](../../tutorials/first-web-api/samples/2.0/TodoApi/wwwroot/site.js?name=snippet_AjaxDelete)]
