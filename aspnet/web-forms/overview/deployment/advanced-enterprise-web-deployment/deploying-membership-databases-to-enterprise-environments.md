---
uid: web-forms/overview/deployment/advanced-enterprise-web-deployment/deploying-membership-databases-to-enterprise-environments
title: "멤버 자격 데이터베이스 엔터프라이즈 환경에 배포 | Microsoft Docs"
author: jrjlee
description: "이 항목에서는 주요 고려 사항 및 (더 일반적... ASP.NET 응용 프로그램 서비스 데이터베이스를 프로 비전 할 때 해결 해야 하는 문제 설명"
ms.author: aspnetcontent
manager: wpickett
ms.date: 05/04/2012
ms.topic: article
ms.assetid: 3cf765df-d311-4f68-a295-c9685ceea830
ms.technology: dotnet-webforms
ms.prod: .net-framework
msc.legacyurl: /web-forms/overview/deployment/advanced-enterprise-web-deployment/deploying-membership-databases-to-enterprise-environments
msc.type: authoredcontent
ms.openlocfilehash: 27fade9fc5cae917579d4963da7bca12f6a5cda1
ms.sourcegitcommit: 493a215355576cfa481773365de021bcf04bb9c7
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 03/15/2018
---
<a name="deploying-membership-databases-to-enterprise-environments"></a><span data-ttu-id="ce9e6-103">멤버 자격 데이터베이스 엔터프라이즈 환경에 배포</span><span class="sxs-lookup"><span data-stu-id="ce9e6-103">Deploying Membership Databases to Enterprise Environments</span></span>
====================
<span data-ttu-id="ce9e6-104">으로 [Jason lee 공저](https://github.com/jrjlee)</span><span class="sxs-lookup"><span data-stu-id="ce9e6-104">by [Jason Lee](https://github.com/jrjlee)</span></span>

[<span data-ttu-id="ce9e6-105">PDF 다운로드</span><span class="sxs-lookup"><span data-stu-id="ce9e6-105">Download PDF</span></span>](https://msdnshared.blob.core.windows.net/media/MSDNBlogsFS/prod.evol.blogs.msdn.com/CommunityServer.Blogs.Components.WeblogFiles/00/00/00/63/56/8130.DeployingWebAppsInEnterpriseScenarios.pdf)

> <span data-ttu-id="ce9e6-106">이 항목에서는 주요 고려 사항 및 테스트, 준비 또는 프로덕션 환경에서 (일반적으로 멤버 자격 데이터베이스 라고도 함)는 데이터베이스를 서비스 하는 ASP.NET 응용 프로그램 구축 때 알아야 할 문제를 설명 합니다.</span><span class="sxs-lookup"><span data-stu-id="ce9e6-106">This topic explains the key considerations and challenges you'll need to overcome when you provision ASP.NET application services databases (more commonly referred to as membership databases) in test, staging, or production environments.</span></span> <span data-ttu-id="ce9e6-107">이러한 과제를 충족 하는 데 사용할 수는 방법에 대해서도 설명 합니다.</span><span class="sxs-lookup"><span data-stu-id="ce9e6-107">It also describes approaches you can use to meet these challenges.</span></span>


<span data-ttu-id="ce9e6-108">이 항목의 Fabrikam, inc. 라는 가상 회사의 엔터프라이즈 배포 요구 사항을 바탕으로 하는 자습서 시리즈의 일부를 형성 합니다. 이 자습서 시리즈 샘플 솔루션 & #x 2014;을 사용 하는 [Contact Manager 솔루션](../web-deployment-in-the-enterprise/the-contact-manager-solution.md)& #x 2014; 현실적인 수준의 복잡성을 Windows ASP.NET MVC 3 응용 프로그램을 포함 하 여 웹 응용 프로그램을 나타내기 위해 Communication Foundation (WCF) 서비스 및 데이터베이스 프로젝트를 제공 합니다.</span><span class="sxs-lookup"><span data-stu-id="ce9e6-108">This topic forms part of a series of tutorials based around the enterprise deployment requirements of a fictional company named Fabrikam, Inc. This tutorial series uses a sample solution&#x2014;the [Contact Manager solution](../web-deployment-in-the-enterprise/the-contact-manager-solution.md)&#x2014;to represent a web application with a realistic level of complexity, including an ASP.NET MVC 3 application, a Windows Communication Foundation (WCF) service, and a database project.</span></span>

<span data-ttu-id="ce9e6-109">이 자습서의 핵심에는 배포 방법에 설명 된 분할 프로젝트 파일 접근 방식에 따라 [프로젝트 파일 이해](../web-deployment-in-the-enterprise/understanding-the-project-file.md), 빌드 프로세스에 의해 제어 되는 두 프로젝트에 파일 & #x 2014; 포함 환경 관련 빌드 및 배포 설정을 포함 하는 하나 및 모든 대상 환경에 적용 되는 지침을 빌드하십시오.</span><span class="sxs-lookup"><span data-stu-id="ce9e6-109">The deployment method at the heart of these tutorials is based on the split project file approach described in [Understanding the Project File](../web-deployment-in-the-enterprise/understanding-the-project-file.md), in which the build process is controlled by two project files&#x2014;one containing build instructions that apply to every destination environment, and one containing environment-specific build and deployment settings.</span></span> <span data-ttu-id="ce9e6-110">빌드 시 환경 관련 프로젝트 파일은 빌드 지침의 전체 집합을 구성 하기 위해 환경을 알 수 없는 프로젝트 파일에 병합 됩니다.</span><span class="sxs-lookup"><span data-stu-id="ce9e6-110">At build time, the environment-specific project file is merged into the environment-agnostic project file to form a complete set of build instructions.</span></span>

## <a name="what-are-the-issues-when-you-deploy-a-membership-database"></a><span data-ttu-id="ce9e6-111">멤버 자격 데이터베이스를 배포할 때 문제점은 무엇입니까?</span><span class="sxs-lookup"><span data-stu-id="ce9e6-111">What Are the Issues When You Deploy a Membership Database?</span></span>

<span data-ttu-id="ce9e6-112">대부분의 경우에는 데이터베이스에 대 한 배포 전략을 고안 가장 먼저 고려해 야 할 배포 하려는 데이터입니다.</span><span class="sxs-lookup"><span data-stu-id="ce9e6-112">In most cases, when you devise a deployment strategy for a database, the first thing you need to consider is what data you want to deploy.</span></span> <span data-ttu-id="ce9e6-113">개발 또는 테스트 환경에서 사용자 계정 데이터를 쉽게 빠르고 쉬운 테스트를 배포 하는 것이 좋습니다.</span><span class="sxs-lookup"><span data-stu-id="ce9e6-113">In a development or test environment, you might want to deploy user account data to facilitate quick and easy testing.</span></span> <span data-ttu-id="ce9e6-114">스테이징 또는 프로덕션 환경에서 사용자 계정 데이터를 배포 하려는 것 가능성이 매우 아닙니다.</span><span class="sxs-lookup"><span data-stu-id="ce9e6-114">In a staging or production environment, it's very unlikely that you'd want to deploy user account data.</span></span>

<span data-ttu-id="ce9e6-115">안타깝게도, ASP.NET 멤버 자격 데이터베이스 사항이이 결정을 훨씬 더 복잡 한 구성 하는 몇 가지 특정 문제.</span><span class="sxs-lookup"><span data-stu-id="ce9e6-115">Unfortunately, ASP.NET membership databases introduce some specific challenges that make this decision a lot more complex:</span></span>

- <span data-ttu-id="ce9e6-116">스키마 전용 배포에는 작동 하지 않는 상태에 멤버 자격 데이터베이스를 종료 됩니다.</span><span class="sxs-lookup"><span data-stu-id="ce9e6-116">A schema-only deployment will leave the membership database in a non-operational state.</span></span> <span data-ttu-id="ce9e6-117">멤버 자격 데이터베이스 일부 구성 데이터를 포함 하기 때문에 이것이 (에 **aspnet\_SchemaVersions** 테이블) 데이터베이스에 필요한 실행 되기 위해서는 합니다.</span><span class="sxs-lookup"><span data-stu-id="ce9e6-117">This is because the membership database includes some configuration data (in the **aspnet\_SchemaVersions** table) that the database requires in order to function.</span></span> <span data-ttu-id="ce9e6-118">이와 같이 사용자 계정 데이터를 제외 멤버 자격 데이터베이스의 스키마 전용 배포를 수행 하는 경우에 essential 구성 데이터를 추가 하는 배포 후 스크립트를 실행 해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="ce9e6-118">As such, if you perform a schema-only deployment of your membership database in order to exclude user account data, you'll need to run a post-deployment script to add the essential configuration data.</span></span>
- <span data-ttu-id="ce9e6-119">멤버 자격 데이터베이스 구성 방법에 따라 멤버 자격 공급자 컴퓨터 키를 사용 하 여 암호를 암호화 하 여 데이터베이스에 저장할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="ce9e6-119">Depending on how your membership database is configured, the membership provider may use the machine key to encrypt passwords and store them in the database.</span></span> <span data-ttu-id="ce9e6-120">이 경우 데이터베이스와 배포 사용자 계정 데이터는 대상 서버에서 사용할 수 없게 됩니다.</span><span class="sxs-lookup"><span data-stu-id="ce9e6-120">In this case, any user account data you deploy with the database will become unusable on the destination server.</span></span> <span data-ttu-id="ce9e6-121">이러한 이유로 사용자 계정 데이터 배포는 시나리오 지원된 되지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="ce9e6-121">For this reason, deploying user account data is not a supported scenario.</span></span>

## <a name="choosing-a-membership-database-strategy"></a><span data-ttu-id="ce9e6-122">멤버 자격 데이터베이스 전략 선택</span><span class="sxs-lookup"><span data-stu-id="ce9e6-122">Choosing a Membership Database Strategy</span></span>

<span data-ttu-id="ce9e6-123">엔터프라이즈 서버 환경에서 멤버 자격 데이터베이스를 프로 비전 하는 방법을 선택할 때 이러한 지침을 따르세요.</span><span class="sxs-lookup"><span data-stu-id="ce9e6-123">Use these guidelines when you choose how to provision a membership database in an enterprise server environment:</span></span>

- <span data-ttu-id="ce9e6-124">가능 하면 멤버 자격 데이터베이스를 배포 하지 마십시오.</span><span class="sxs-lookup"><span data-stu-id="ce9e6-124">Wherever possible, do not deploy membership databases.</span></span> <span data-ttu-id="ce9e6-125">대상 데이터베이스 서버에서 멤버 자격 데이터베이스를 수동으로 만들 대신 합니다.</span><span class="sxs-lookup"><span data-stu-id="ce9e6-125">Instead, create the membership database manually on the target database server.</span></span> <span data-ttu-id="ce9e6-126">멤버 자격 데이터베이스 스키마를 사용자 지정 하지 않은 경우 만들 수 있습니다 간단히 새 situ에 사용 하 여 대상에는 [ASP.NET SQL Server 등록 도구 (aspnet\_regsql.exe)](https://msdn.microsoft.com/library/ms229862(v=vs.100).aspx)합니다.</span><span class="sxs-lookup"><span data-stu-id="ce9e6-126">If you haven't customized your membership database schema, you can simply create a new one in situ at the destination using the [ASP.NET SQL Server Registration Tool (aspnet\_regsql.exe)](https://msdn.microsoft.com/library/ms229862(v=vs.100).aspx).</span></span>
- <span data-ttu-id="ce9e6-127">배포 멤버 자격 데이터베이스 & #x 2014; 있지만 옵션이 있는 경우 예를 들어 경우 광범위 한 데이터베이스 스키마 & #x 2014; 수정 내용을 변경한 후 수행 해야 사용자 계정 데이터를 제외 하는 멤버 자격 데이터베이스의 스키마 전용 배포 및 다음 필수 구성 데이터를 추가 하는 배포 후 스크립트를 실행 합니다.</span><span class="sxs-lookup"><span data-stu-id="ce9e6-127">If you have no option but to deploy a membership database&#x2014;for example, if you've made extensive modifications to the database schema&#x2014;you should perform a schema-only deployment of the membership database, to exclude user account data, and then run a post-deployment script to add any required configuration data.</span></span> <span data-ttu-id="ce9e6-128">이러한 방법에 대 한 광범위 한 지침을 찾을 수 있습니다 [하는 방법: ASP.NET 멤버 자격 데이터베이스 없이 포함 하 여 사용자 계정을 배포](https://msdn.microsoft.com/library/ff361972(v=vs.100).aspx)합니다.</span><span class="sxs-lookup"><span data-stu-id="ce9e6-128">You can find broad guidance on these approaches in [How to: Deploy the ASP.NET Membership Database Without Including User Accounts](https://msdn.microsoft.com/library/ff361972(v=vs.100).aspx).</span></span>

<span data-ttu-id="ce9e6-129">사항에 유의 해야 *멤버 자격 데이터베이스의 스키마가 상당히 정적일 가능성이*합니다.</span><span class="sxs-lookup"><span data-stu-id="ce9e6-129">It's important to remember that *the schema of your membership database is likely to be fairly static*.</span></span> <span data-ttu-id="ce9e6-130">멤버 자격 데이터베이스를 사용자 지정한 경우에 가능성이 정기적으로 & #x 2014에서 스키마를 업데이트 해야 하며 웹 응용 프로그램 또는 데이터베이스 프로젝트의 코드와 동일한 빈도로 변경 되기 하지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="ce9e6-130">Even if you've customized the membership database, it's unlikely that you'll need to update the schema on a regular basis&#x2014;it's not going to change with the same frequency as the code in a web application or a database project.</span></span> <span data-ttu-id="ce9e6-131">따라서 멤버 자격 데이터베이스는 단일 단계 또는 자동화 된 배포 프로세스에 포함할 필요는 없습니다.</span><span class="sxs-lookup"><span data-stu-id="ce9e6-131">As such, you shouldn't need to include the membership database in any automated or single-step deployment processes.</span></span>

## <a name="using-vsdbcmd-to-update-a-membership-database-schema"></a><span data-ttu-id="ce9e6-132">VSDBCMD를 사용 하 여 멤버 자격 데이터베이스 스키마를 업데이트 하려면</span><span class="sxs-lookup"><span data-stu-id="ce9e6-132">Using VSDBCMD to Update a Membership Database Schema</span></span>

<span data-ttu-id="ce9e6-133">첫 번째 배포 후 멤버 자격 데이터베이스의 구조를 수정 하는 경우 데이터베이스를 다시 배포 하려면 인터넷 정보 서비스 (IIS) 웹 배포 도구 (웹 배포)를 사용 하려는 하지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="ce9e6-133">If you modify the structure of your membership database after your first deployment, you may not want to use the Internet Information Services (IIS) Web Deployment Tool (Web Deploy) to redeploy the database.</span></span> <span data-ttu-id="ce9e6-134">웹 배포에서 데이터베이스 배포 기능에는 대상 데이터베이스 & #x 2014 차등 업데이트를 확인 하는 기능이 포함 되어 있지 않습니다; 대신, 웹 배포 해야 삭제 하 고 데이터베이스를 다시 만드는 합니다.</span><span class="sxs-lookup"><span data-stu-id="ce9e6-134">The database deployment functionality in Web Deploy doesn't include the capability to make differential updates to a destination database&#x2014;instead, Web Deploy must drop and re-create the database.</span></span> <span data-ttu-id="ce9e6-135">즉, 스테이징 또는 프로덕션 환경에서 일반적으로 것이 바람직하지 않은 모든 기존 사용자 계정 데이터를 잃게 됩니다.</span><span class="sxs-lookup"><span data-stu-id="ce9e6-135">This means that you lose any existing user account data, which is typically undesirable in staging or production environments.</span></span>

<span data-ttu-id="ce9e6-136">대신 사용 하는 대상 데이터베이스의 스키마를 업데이트 하는 VSDBCMD 유틸리티를 사용 하는 것입니다.</span><span class="sxs-lookup"><span data-stu-id="ce9e6-136">The alternative is to use the VSDBCMD utility to update the schema of your destination database.</span></span> <span data-ttu-id="ce9e6-137">VSDBCMD 두 가지 중요 한 기능이 포함 되어 있습니다.</span><span class="sxs-lookup"><span data-stu-id="ce9e6-137">VSDBCMD includes two important capabilities.</span></span> <span data-ttu-id="ce9e6-138">첫째,.dbschema 파일로 기존 데이터베이스의 스키마를 가져올 수 것입니다.</span><span class="sxs-lookup"><span data-stu-id="ce9e6-138">First, it can import the schema of an existing database into a .dbschema file.</span></span> <span data-ttu-id="ce9e6-139">둘째, 대상 데이터베이스를 최신 상태로 만드는 데 필요한 변경 내용을 더욱 모든 데이터가 손실 되지 않으며 차등 업데이트를으로 기존 데이터베이스에.dbschema 파일을 배포할 수 것입니다.</span><span class="sxs-lookup"><span data-stu-id="ce9e6-139">Second, it can deploy a .dbschema file to an existing database as a differential update, which means that it only makes the changes required to bring the target database up to date and you don't lose any data.</span></span>

<span data-ttu-id="ce9e6-140">멤버 자격 데이터베이스 스키마를 업데이트 하려면 같은 대략적인 단계를 사용할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="ce9e6-140">You can use these high-level steps to update a membership database schema:</span></span>

1. <span data-ttu-id="ce9e6-141">VSDBCMD 사용 하 여 **가져오기** 소스 멤버 자격 데이터베이스에 대 한.dbschema 파일을 생성 하는 작업입니다.</span><span class="sxs-lookup"><span data-stu-id="ce9e6-141">Use the VSDBCMD **Import** action to generate a .dbschema file for your source membership database.</span></span> <span data-ttu-id="ce9e6-142">이 절차에 설명 되어 [하는 방법: 명령 프롬프트에서 스키마 가져오기](https://msdn.microsoft.com/library/dd172135.aspx)합니다.</span><span class="sxs-lookup"><span data-stu-id="ce9e6-142">This procedure is described in [How to: Import a Schema from a Command Prompt](https://msdn.microsoft.com/library/dd172135.aspx).</span></span>
2. <span data-ttu-id="ce9e6-143">VSDBCMD 사용 하 여 **배포** .dbschema 파일 대상 멤버 자격 데이터베이스에 배포 하는 작업입니다.</span><span class="sxs-lookup"><span data-stu-id="ce9e6-143">Use the VSDBCMD **Deploy** action to deploy the .dbschema file to your destination membership database.</span></span> <span data-ttu-id="ce9e6-144">이 절차에 설명 되어 [VSDBCMD에 대 한 명령줄 참조 합니다. EXE (배포 및 스키마 가져오기)](https://msdn.microsoft.com/library/dd193283.aspx)합니다.</span><span class="sxs-lookup"><span data-stu-id="ce9e6-144">This procedure is described in [Command-Line Reference for VSDBCMD.EXE (Deployment and Schema Import)](https://msdn.microsoft.com/library/dd193283.aspx).</span></span>

## <a name="conclusion"></a><span data-ttu-id="ce9e6-145">결론</span><span class="sxs-lookup"><span data-stu-id="ce9e6-145">Conclusion</span></span>

<span data-ttu-id="ce9e6-146">이 항목에는 다양 한 대상 환경에서 ASP.NET 멤버 자격 데이터베이스를 프로 비전 해야 할 때 직면할 수 있는 문제 중 일부를 설명 합니다.</span><span class="sxs-lookup"><span data-stu-id="ce9e6-146">This topic described some of the challenges you may face when you need to provision ASP.NET membership databases in various target environments.</span></span> <span data-ttu-id="ce9e6-147">특히, 이유 스키마 전용 배포는 멤버 자격 데이터베이스는 작동 하지 않는 상태로 남겨 및 사용자 계정 데이터 배포는 지원 되지 않는 이유 설명 되어 있습니다.</span><span class="sxs-lookup"><span data-stu-id="ce9e6-147">In particular, it explained why schema-only deployments will leave the membership database in a non-operational state and why deploying user account data is not supported.</span></span> <span data-ttu-id="ce9e6-148">또한 항목, 프로 비전 하 고, 배포 하 고, 다양 한 시나리오에서 멤버 자격 데이터베이스를 업데이트 하는 방법에 지침을 표현 합니다.</span><span class="sxs-lookup"><span data-stu-id="ce9e6-148">The topic also presented guidance on how to provision, deploy, and update membership databases in different scenarios.</span></span>

## <a name="further-reading"></a><span data-ttu-id="ce9e6-149">추가 정보</span><span class="sxs-lookup"><span data-stu-id="ce9e6-149">Further Reading</span></span>

<span data-ttu-id="ce9e6-150">자세한 내용과 예 VSDBCMD를 사용 하는 방법에 대 한 참조 [VSDBCMD에 대 한 명령줄 참조 합니다. EXE (배포 및 스키마 가져오기)](https://msdn.microsoft.com/library/dd193283.aspx) 및 [하는 방법: 명령 프롬프트에서 스키마 가져오기](https://msdn.microsoft.com/library/dd172135.aspx)합니다.</span><span class="sxs-lookup"><span data-stu-id="ce9e6-150">For more guidance and examples of how to use VSDBCMD, see [Command-Line Reference for VSDBCMD.EXE (Deployment and Schema Import)](https://msdn.microsoft.com/library/dd193283.aspx) and [How to: Import a Schema from a Command Prompt](https://msdn.microsoft.com/library/dd172135.aspx).</span></span> <span data-ttu-id="ce9e6-151">Aspnet를 사용 하 여 대 한 자세한 내용은\_멤버 자격 데이터베이스를 만들 regsql.exe 참조 [ASP.NET SQL Server 등록 도구 (aspnet\_regsql.exe)](https://msdn.microsoft.com/library/ms229862(v=vs.100).aspx)합니다.</span><span class="sxs-lookup"><span data-stu-id="ce9e6-151">For more information on using aspnet\_regsql.exe to create membership databases, see [ASP.NET SQL Server Registration Tool (aspnet\_regsql.exe)](https://msdn.microsoft.com/library/ms229862(v=vs.100).aspx).</span></span> <span data-ttu-id="ce9e6-152">멤버 자격 데이터베이스 배포에 대 한 보다 일반적인 지침을 참조 하십시오. [하는 방법: ASP.NET 멤버 자격 데이터베이스 없이 포함 하 여 사용자 계정을 배포](https://msdn.microsoft.com/library/ff361972(v=vs.100).aspx)합니다.</span><span class="sxs-lookup"><span data-stu-id="ce9e6-152">For more general guidance on deploying membership databases, see [How to: Deploy the ASP.NET Membership Database Without Including User Accounts](https://msdn.microsoft.com/library/ff361972(v=vs.100).aspx).</span></span>

>[!div class="step-by-step"]
<span data-ttu-id="ce9e6-153">[이전](deploying-database-role-memberships-to-test-environments.md)
[다음](excluding-files-and-folders-from-deployment.md)</span><span class="sxs-lookup"><span data-stu-id="ce9e6-153">[Previous](deploying-database-role-memberships-to-test-environments.md)
[Next](excluding-files-and-folders-from-deployment.md)</span></span>
