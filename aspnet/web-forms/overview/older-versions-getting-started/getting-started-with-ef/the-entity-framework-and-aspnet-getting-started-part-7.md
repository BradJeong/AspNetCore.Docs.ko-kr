---
uid: web-forms/overview/older-versions-getting-started/getting-started-with-ef/the-entity-framework-and-aspnet-getting-started-part-7
title: "먼저 Entity Framework 4.0 데이터베이스와 시작 및 ASP.NET 4 Web Forms-7 부 | Microsoft Docs"
author: tdykstra
description: "Contoso 대학 샘플 웹 응용 프로그램에는 Entity Framework를 사용 하 여 ASP.NET Web Forms 응용 프로그램을 만드는 방법을 보여 줍니다. 샘플 응용 프로그램은..."
ms.author: aspnetcontent
manager: wpickett
ms.date: 12/03/2010
ms.topic: article
ms.assetid: f8afb245-b705-419c-8790-0b295e90d5e2
ms.technology: dotnet-webforms
ms.prod: .net-framework
msc.legacyurl: /web-forms/overview/older-versions-getting-started/getting-started-with-ef/the-entity-framework-and-aspnet-getting-started-part-7
msc.type: authoredcontent
ms.openlocfilehash: 7697763b97e36304d686c77e8cedd060d630c530
ms.sourcegitcommit: 9a9483aceb34591c97451997036a9120c3fe2baf
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 11/10/2017
---
<a name="getting-started-with-entity-framework-40-database-first-and-aspnet-4-web-forms---part-7"></a><span data-ttu-id="4fb80-104">먼저 Entity Framework 4.0 데이터베이스와 시작 및 ASP.NET 4 Web Forms-7 부</span><span class="sxs-lookup"><span data-stu-id="4fb80-104">Getting Started with Entity Framework 4.0 Database First and ASP.NET 4 Web Forms - Part 7</span></span>
====================
<span data-ttu-id="4fb80-105">으로 [Tom Dykstra](https://github.com/tdykstra)</span><span class="sxs-lookup"><span data-stu-id="4fb80-105">by [Tom Dykstra](https://github.com/tdykstra)</span></span>

> <span data-ttu-id="4fb80-106">Contoso 대학 샘플 웹 응용 프로그램에는 Entity Framework 4.0 및 Visual Studio 2010을 사용 하 여 ASP.NET Web Forms 응용 프로그램을 만드는 방법을 보여 줍니다.</span><span class="sxs-lookup"><span data-stu-id="4fb80-106">The Contoso University sample web application demonstrates how to create ASP.NET Web Forms applications using the Entity Framework 4.0 and Visual Studio 2010.</span></span> <span data-ttu-id="4fb80-107">자습서 시리즈에 대 한 정보를 참조 하세요. [시리즈의 첫 번째 자습서](the-entity-framework-and-aspnet-getting-started-part-1.md)</span><span class="sxs-lookup"><span data-stu-id="4fb80-107">For information about the tutorial series, see [the first tutorial in the series](the-entity-framework-and-aspnet-getting-started-part-1.md)</span></span>


## <a name="using-stored-procedures"></a><span data-ttu-id="4fb80-108">저장 프로시저 사용</span><span class="sxs-lookup"><span data-stu-id="4fb80-108">Using Stored Procedures</span></span>

<span data-ttu-id="4fb80-109">이전 자습서에서 계층당 하나의 테이블 상속 패턴을 구현 합니다.</span><span class="sxs-lookup"><span data-stu-id="4fb80-109">In the previous tutorial you implemented a table-per-hierarchy inheritance pattern.</span></span> <span data-ttu-id="4fb80-110">이 자습서에서는 데이터베이스 액세스를 제어 권한을 얻으려고 저장된 프로시저를 사용 하는 방법을 보여줍니다.</span><span class="sxs-lookup"><span data-stu-id="4fb80-110">This tutorial will show you how to use stored procedures to gain more control over database access.</span></span>

<span data-ttu-id="4fb80-111">Entity Framework를 사용 하면 데이터베이스 액세스를 위한 저장된 프로시저를 사용 해야 것을 지정할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="4fb80-111">The Entity Framework lets you specify that it should use stored procedures for database access.</span></span> <span data-ttu-id="4fb80-112">모든 엔터티 형식에 대 한 만들기, 업데이트 또는 해당 형식의 엔터티를 삭제 하는 중에 사용할 저장된 프로시저를 지정할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="4fb80-112">For any entity type, you can specify a stored procedure to use for creating, updating, or deleting entities of that type.</span></span> <span data-ttu-id="4fb80-113">그런 다음 데이터 모델의 엔터티 집합을 검색 하는 등 작업을 수행 하는 데 사용할 수 있는 저장된 프로시저에 대 한 참조를 추가할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="4fb80-113">Then in the data model you can add references to stored procedures that you can use to perform tasks such as retrieving sets of entities.</span></span>

<span data-ttu-id="4fb80-114">저장된 프로시저를 사용 하 여 데이터베이스 액세스에 대 한 일반적인 요구 사항입니다.</span><span class="sxs-lookup"><span data-stu-id="4fb80-114">Using stored procedures is a common requirement for database access.</span></span> <span data-ttu-id="4fb80-115">일부 경우에는 데이터베이스 관리자가 데이터베이스에 대 한 모든 액세스 보안상의 이유로 저장된 프로시저를 통과 필요할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="4fb80-115">In some cases a database administrator may require that all database access go through stored procedures for security reasons.</span></span> <span data-ttu-id="4fb80-116">다른 경우에는 일부 데이터베이스를 업데이트 하는 엔터티 프레임 워크에서 사용 하는 프로세스에 비즈니스 논리를 작성 하는 것이 좋습니다.</span><span class="sxs-lookup"><span data-stu-id="4fb80-116">In other cases you may want to build business logic into some of the processes that the Entity Framework uses when it updates the database.</span></span> <span data-ttu-id="4fb80-117">예를 들어 엔터티 삭제 될 때마다 보관 데이터베이스를 복사 하는 것이 좋습니다.</span><span class="sxs-lookup"><span data-stu-id="4fb80-117">For example, whenever an entity is deleted you might want to copy it to an archive database.</span></span> <span data-ttu-id="4fb80-118">또는 행이 업데이트 될 때마다 기록 변경 내용을 적용 하는 로깅 테이블에 행을 작성 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="4fb80-118">Or whenever a row is updated you might want to write a row to a logging table that records who made the change.</span></span> <span data-ttu-id="4fb80-119">Entity Framework는 엔터티를 삭제 또는 엔터티를 업데이트 될 때마다 호출 되는 저장된 프로시저에서 이러한 종류의 작업을 수행할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="4fb80-119">You can perform these kinds of tasks in a stored procedure that's called whenever the Entity Framework deletes an entity or updates an entity.</span></span>

<span data-ttu-id="4fb80-120">이전 자습서에서와 같이 하지 새 페이지를 만듭니다.</span><span class="sxs-lookup"><span data-stu-id="4fb80-120">As in the previous tutorial, you'll not create any new pages.</span></span> <span data-ttu-id="4fb80-121">대신, Entity Framework 이미 만든 페이지 중 일부에 대해 데이터베이스에 액세스 하는 방법을 변경 합니다.</span><span class="sxs-lookup"><span data-stu-id="4fb80-121">Instead, you'll change the way the Entity Framework accesses the database for some of the pages you already created.</span></span>

<span data-ttu-id="4fb80-122">이 자습서에서는 삽입에 대 한 데이터베이스의 저장된 프로시저를 만듭니다 `Student` 및 `Instructor` 엔터티.</span><span class="sxs-lookup"><span data-stu-id="4fb80-122">In this tutorial you'll create stored procedures in the database for inserting `Student` and `Instructor` entities.</span></span> <span data-ttu-id="4fb80-123">데이터 모델에 추가 합니다 및 Entity Framework 사용 해야 함을 추가 하는 데 지정 합니다 `Student` 및 `Instructor` 엔터티가 데이터베이스에 있습니다.</span><span class="sxs-lookup"><span data-stu-id="4fb80-123">You'll add them to the data model, and you'll specify that the Entity Framework should use them for adding `Student` and `Instructor` entities to the database.</span></span> <span data-ttu-id="4fb80-124">검색 하는 데 사용할 수 있는 저장된 프로시저 또한 만들어 `Course` 엔터티.</span><span class="sxs-lookup"><span data-stu-id="4fb80-124">You'll also create a stored procedure that you can use to retrieve `Course` entities.</span></span>

## <a name="creating-stored-procedures-in-the-database"></a><span data-ttu-id="4fb80-125">데이터베이스에 저장된 프로시저 만들기</span><span class="sxs-lookup"><span data-stu-id="4fb80-125">Creating Stored Procedures in the Database</span></span>

<span data-ttu-id="4fb80-126">(사용 중인 경우는 *School.mdf* 파일이이 자습서와 함께 다운로드할 수 있는 프로젝트에서이 단원을 건너뛸 수 있습니다이 저장된 프로시저가 이미 존재 하므로.)</span><span class="sxs-lookup"><span data-stu-id="4fb80-126">(If you're using the *School.mdf* file from the project available for download with this tutorial, you can skip this section because the stored procedures already exist.)</span></span>

<span data-ttu-id="4fb80-127">**서버 탐색기**, 확장 *School.mdf*를 마우스 오른쪽 단추로 클릭 **저장 프로시저**를 선택 하 고 **새 저장 프로시저 추가**합니다.</span><span class="sxs-lookup"><span data-stu-id="4fb80-127">In **Server Explorer**, expand *School.mdf*, right-click **Stored Procedures**, and select **Add New Stored Procedure**.</span></span>

<span data-ttu-id="4fb80-128">[![image15](the-entity-framework-and-aspnet-getting-started-part-7/_static/image2.png)](the-entity-framework-and-aspnet-getting-started-part-7/_static/image1.png)</span><span class="sxs-lookup"><span data-stu-id="4fb80-128">[![image15](the-entity-framework-and-aspnet-getting-started-part-7/_static/image2.png)](the-entity-framework-and-aspnet-getting-started-part-7/_static/image1.png)</span></span>

<span data-ttu-id="4fb80-129">다음 SQL 문을 복사 하 고 저장된 프로시저 창에 붙여 기초 저장된 프로시저를 대체 합니다.</span><span class="sxs-lookup"><span data-stu-id="4fb80-129">Copy the following SQL statements and paste them into the stored procedure window, replacing the skeleton stored procedure.</span></span>

[!code-sql[Main](the-entity-framework-and-aspnet-getting-started-part-7/samples/sample1.sql)]

<span data-ttu-id="4fb80-130">[![image14](the-entity-framework-and-aspnet-getting-started-part-7/_static/image4.png)](the-entity-framework-and-aspnet-getting-started-part-7/_static/image3.png)</span><span class="sxs-lookup"><span data-stu-id="4fb80-130">[![image14](the-entity-framework-and-aspnet-getting-started-part-7/_static/image4.png)](the-entity-framework-and-aspnet-getting-started-part-7/_static/image3.png)</span></span>

<span data-ttu-id="4fb80-131">`Student`엔터티는 4 개의 속성: `PersonID`, `LastName`, `FirstName`, 및 `EnrollmentDate`합니다.</span><span class="sxs-lookup"><span data-stu-id="4fb80-131">`Student` entities have four properties: `PersonID`, `LastName`, `FirstName`, and `EnrollmentDate`.</span></span> <span data-ttu-id="4fb80-132">데이터베이스에서 ID 값을 자동으로 생성 및 저장된 프로시저는 다른 세 개에 대 한 매개 변수를 허용 합니다.</span><span class="sxs-lookup"><span data-stu-id="4fb80-132">The database generates the ID value automatically, and the stored procedure accepts parameters for the other three.</span></span> <span data-ttu-id="4fb80-133">저장된 프로시저를 Entity Framework의 추적할 수 있는 메모리에 유지 된 엔터티 버전에서 새 행의 레코드 키의 값을 반환 합니다.</span><span class="sxs-lookup"><span data-stu-id="4fb80-133">The stored procedure returns the value of the new row's record key so that the Entity Framework can keep track of that in the version of the entity it keeps in memory.</span></span>

<span data-ttu-id="4fb80-134">저장 하 고 저장된 프로시저 창을 닫습니다.</span><span class="sxs-lookup"><span data-stu-id="4fb80-134">Save and close the stored procedure window.</span></span>

<span data-ttu-id="4fb80-135">만들기는 `InsertInstructor` 다음 SQL 문을 사용 하 여 동일한 방식으로 저장 프로시저:</span><span class="sxs-lookup"><span data-stu-id="4fb80-135">Create an `InsertInstructor` stored procedure in the same manner, using the following SQL statements:</span></span>

[!code-sql[Main](the-entity-framework-and-aspnet-getting-started-part-7/samples/sample2.sql)]

<span data-ttu-id="4fb80-136">만들 `Update` 저장 프로시저에 대 한 `Student` 및 `Instructor` 엔터티도 합니다.</span><span class="sxs-lookup"><span data-stu-id="4fb80-136">Create `Update` stored procedures for `Student` and `Instructor` entities also.</span></span> <span data-ttu-id="4fb80-137">(데이터베이스에 이미는 `DeletePerson` 저장 프로시저 모두에 `Instructor` 및 `Student` 엔터티.)</span><span class="sxs-lookup"><span data-stu-id="4fb80-137">(The database already has a `DeletePerson` stored procedure which will work for both `Instructor` and `Student` entities.)</span></span>

[!code-sql[Main](the-entity-framework-and-aspnet-getting-started-part-7/samples/sample3.sql)]

[!code-sql[Main](the-entity-framework-and-aspnet-getting-started-part-7/samples/sample4.sql)]

<span data-ttu-id="4fb80-138">이 자습서에서는 각 엔터티 형식에 대 한 모든 세 함수를-예: insert, update 및 delete-매핑합니다.</span><span class="sxs-lookup"><span data-stu-id="4fb80-138">In this tutorial you'll map all three functions -- insert, update, and delete -- for each entity type.</span></span> <span data-ttu-id="4fb80-139">Entity Framework 버전 4 하나만 매핑할 수 있습니다. 또는 저장된 프로시저에는 다른 예외적으로 매핑하지 않고 함수 중 두 가지: Entity Framework에서 예외를 throw 합니다 업데이트 함수 하지만 삭제 기능이 아니라에 매핑할 경우 때 있습니다 엔터티를 삭제 하려고 시도 합니다.</span><span class="sxs-lookup"><span data-stu-id="4fb80-139">The Entity Framework version 4 allows you to map just one or two of these functions to stored procedures without mapping the others, with one exception: if you map the update function but not the delete function, the Entity Framework will throw an exception when you attempt to delete an entity.</span></span> <span data-ttu-id="4fb80-140">Entity Framework 버전 3.5에서에서 하지 않은 저장된 프로시저 매핑에 처럼 많은 유연성: 있습니다 함수가 두 개를 매핑한 경우 세 가지 모두에 매핑할 필요 했습니다.</span><span class="sxs-lookup"><span data-stu-id="4fb80-140">In the Entity Framework version 3.5, you did not have this much flexibility in mapping stored procedures: if you mapped one function you were required to map all three.</span></span>

<span data-ttu-id="4fb80-141">데이터를 업데이트 하는 대신 표시 하는 저장된 프로시저를 만들려면 모든 선택 하나를 만들 `Course` 엔터티를 다음 SQL 문을 사용 하 여:</span><span class="sxs-lookup"><span data-stu-id="4fb80-141">To create a stored procedure that reads rather than updates data, create one that selects all `Course` entities, using the following SQL statements:</span></span>

[!code-sql[Main](the-entity-framework-and-aspnet-getting-started-part-7/samples/sample5.sql)]

## <a name="adding-the-stored-procedures-to-the-data-model"></a><span data-ttu-id="4fb80-142">데이터 모델에 저장된 프로시저에 추가</span><span class="sxs-lookup"><span data-stu-id="4fb80-142">Adding the Stored Procedures to the Data Model</span></span>

<span data-ttu-id="4fb80-143">저장된 프로시저는 데이터베이스에 정의 되기 하지만 Entity Framework에 사용할 수 있도록 하 여 데이터 모델에 추가 해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="4fb80-143">The stored procedures are now defined in the database, but they must be added to the data model to make them available to the Entity Framework.</span></span> <span data-ttu-id="4fb80-144">열기 *SchoolModel.edmx*디자인 화면을 마우스 오른쪽 단추로 클릭 하 고 선택 **데이터베이스에서 모델 업데이트**합니다.</span><span class="sxs-lookup"><span data-stu-id="4fb80-144">Open *SchoolModel.edmx*, right-click the design surface, and select **Update Model from Database**.</span></span> <span data-ttu-id="4fb80-145">에 **추가** 탭은 **데이터베이스 개체 선택** 대화 상자에서 **Stored Procedures**, 새로 만든된 저장된 프로시저를 선택 및 `DeletePerson` 저장 프로시저를 클릭 하 고 **마침**합니다.</span><span class="sxs-lookup"><span data-stu-id="4fb80-145">In the **Add** tab of the **Choose Your Database Objects** dialog box, expand **Stored Procedures**, select the newly created stored procedures and the `DeletePerson` stored procedure, and then click **Finish**.</span></span>

<span data-ttu-id="4fb80-146">[![image20](the-entity-framework-and-aspnet-getting-started-part-7/_static/image6.png)](the-entity-framework-and-aspnet-getting-started-part-7/_static/image5.png)</span><span class="sxs-lookup"><span data-stu-id="4fb80-146">[![image20](the-entity-framework-and-aspnet-getting-started-part-7/_static/image6.png)](the-entity-framework-and-aspnet-getting-started-part-7/_static/image5.png)</span></span>

## <a name="mapping-the-stored-procedures"></a><span data-ttu-id="4fb80-147">저장된 프로시저 매핑</span><span class="sxs-lookup"><span data-stu-id="4fb80-147">Mapping the Stored Procedures</span></span>

<span data-ttu-id="4fb80-148">데이터 모델 디자이너에서 마우스 오른쪽 단추로 클릭는 `Student` 엔터티와 선택 **저장 프로시저 매핑**합니다.</span><span class="sxs-lookup"><span data-stu-id="4fb80-148">In the data model designer, right-click the `Student` entity and select **Stored Procedure Mapping**.</span></span>

<span data-ttu-id="4fb80-149">[![image21](the-entity-framework-and-aspnet-getting-started-part-7/_static/image8.png)](the-entity-framework-and-aspnet-getting-started-part-7/_static/image7.png)</span><span class="sxs-lookup"><span data-stu-id="4fb80-149">[![image21](the-entity-framework-and-aspnet-getting-started-part-7/_static/image8.png)](the-entity-framework-and-aspnet-getting-started-part-7/_static/image7.png)</span></span>

<span data-ttu-id="4fb80-150">**매핑 정보** Entity Framework는 삽입, 업데이트 및 이러한 종류의 엔터티를 삭제에 사용 해야 하는 저장된 프로시저를 지정할 수 있는 창이 나타납니다.</span><span class="sxs-lookup"><span data-stu-id="4fb80-150">The **Mapping Details** window appears, in which you can specify stored procedures that the Entity Framework should use for inserting, updating, and deleting entities of this type.</span></span>

<span data-ttu-id="4fb80-151">[![image22](the-entity-framework-and-aspnet-getting-started-part-7/_static/image10.png)](the-entity-framework-and-aspnet-getting-started-part-7/_static/image9.png)</span><span class="sxs-lookup"><span data-stu-id="4fb80-151">[![image22](the-entity-framework-and-aspnet-getting-started-part-7/_static/image10.png)](the-entity-framework-and-aspnet-getting-started-part-7/_static/image9.png)</span></span>

<span data-ttu-id="4fb80-152">설정의 **삽입** 함수를 **InsertStudent**합니다.</span><span class="sxs-lookup"><span data-stu-id="4fb80-152">Set the **Insert** function to **InsertStudent**.</span></span> <span data-ttu-id="4fb80-153">창에는 엔터티 속성에 매핑되어 있어야 하며 각 저장된 프로시저 매개 변수 목록이 표시 됩니다.</span><span class="sxs-lookup"><span data-stu-id="4fb80-153">The window shows a list of stored procedure parameters, each of which must be mapped to an entity property.</span></span> <span data-ttu-id="4fb80-154">이러한 두가 자동으로 매핑되어야 이름이 같기 때문에 있습니다.</span><span class="sxs-lookup"><span data-stu-id="4fb80-154">Two of these are mapped automatically because the names are the same.</span></span> <span data-ttu-id="4fb80-155">라는 엔터티 속성이 없기 `FirstName`수동으로 선택 해야 하므로 `FirstMidName` 사용 가능한 엔터티 속성을 표시 하는 드롭다운 목록에서 합니다.</span><span class="sxs-lookup"><span data-stu-id="4fb80-155">There's no entity property named `FirstName`, so you must manually select `FirstMidName` from a drop-down list that shows available entity properties.</span></span> <span data-ttu-id="4fb80-156">(의 이름이 변경 때문에 이것이 `FirstName` 속성을 `FirstMidName` 첫 번째 자습서에서.)</span><span class="sxs-lookup"><span data-stu-id="4fb80-156">(This is because you changed the name of the `FirstName` property to `FirstMidName` in the first tutorial.)</span></span>

<span data-ttu-id="4fb80-157">[![image23](the-entity-framework-and-aspnet-getting-started-part-7/_static/image12.png)](the-entity-framework-and-aspnet-getting-started-part-7/_static/image11.png)</span><span class="sxs-lookup"><span data-stu-id="4fb80-157">[![image23](the-entity-framework-and-aspnet-getting-started-part-7/_static/image12.png)](the-entity-framework-and-aspnet-getting-started-part-7/_static/image11.png)</span></span>

<span data-ttu-id="4fb80-158">동일한 **매핑 정보** 창, 맵은 `Update` 함수를 `UpdateStudent` 저장 프로시저 (지정 했는지 확인 `FirstMidName` 에 대 한 매개 변수 값으로 `FirstName`의 경우와 달리는 `Insert` 저장 프로시저) 및 `Delete` 함수를 `DeletePerson` 저장 프로시저입니다.</span><span class="sxs-lookup"><span data-stu-id="4fb80-158">In the same **Mapping Details** window, map the `Update` function to the `UpdateStudent` stored procedure (make sure you specify `FirstMidName` as the parameter value for `FirstName`, as you did for the `Insert` stored procedure) and the `Delete` function to the `DeletePerson` stored procedure.</span></span>

<span data-ttu-id="4fb80-159">[![image01](the-entity-framework-and-aspnet-getting-started-part-7/_static/image14.png)](the-entity-framework-and-aspnet-getting-started-part-7/_static/image13.png)</span><span class="sxs-lookup"><span data-stu-id="4fb80-159">[![image01](the-entity-framework-and-aspnet-getting-started-part-7/_static/image14.png)](the-entity-framework-and-aspnet-getting-started-part-7/_static/image13.png)</span></span>

<span data-ttu-id="4fb80-160">강사에 대 한 저장 프로시저 insert, update 및 delete 매핑할 동일한 절차에 따라는 `Instructor` 엔터티.</span><span class="sxs-lookup"><span data-stu-id="4fb80-160">Follow the same procedure to map the insert, update, and delete stored procedures for instructors to the `Instructor` entity.</span></span>

<span data-ttu-id="4fb80-161">[![image02](the-entity-framework-and-aspnet-getting-started-part-7/_static/image16.png)](the-entity-framework-and-aspnet-getting-started-part-7/_static/image15.png)</span><span class="sxs-lookup"><span data-stu-id="4fb80-161">[![image02](the-entity-framework-and-aspnet-getting-started-part-7/_static/image16.png)](the-entity-framework-and-aspnet-getting-started-part-7/_static/image15.png)</span></span>

<span data-ttu-id="4fb80-162">데이터 업데이트 하는 대신 읽을 하는 저장 프로시저를 사용 하는 **모델 브라우저** 엔터티에 저장된 프로시저를 매핑할 창 입력 반환 합니다.</span><span class="sxs-lookup"><span data-stu-id="4fb80-162">For stored procedures that read rather than update data, you use the **Model Browser** window to map the stored procedure to the entity type it returns.</span></span> <span data-ttu-id="4fb80-163">데이터 모델 디자이너에서 디자인 화면 및 선택 마우스 오른쪽 단추로 클릭 **모델 브라우저**합니다.</span><span class="sxs-lookup"><span data-stu-id="4fb80-163">In the data model designer, right-click the design surface and select **Model Browser**.</span></span> <span data-ttu-id="4fb80-164">열기는 **SchoolModel.Store** 노드를 연 후는 **Stored Procedures** 노드.</span><span class="sxs-lookup"><span data-stu-id="4fb80-164">Open the **SchoolModel.Store** node and then open the **Stored Procedures** node.</span></span> <span data-ttu-id="4fb80-165">마우스 오른쪽 단추로 클릭 한 다음는 `GetCourses` 저장 프로시저 및 선택 **함수 가져오기 추가**합니다.</span><span class="sxs-lookup"><span data-stu-id="4fb80-165">Then right-click the `GetCourses` stored procedure and select **Add Function Import**.</span></span>

<span data-ttu-id="4fb80-166">[![image24](the-entity-framework-and-aspnet-getting-started-part-7/_static/image18.png)](the-entity-framework-and-aspnet-getting-started-part-7/_static/image17.png)</span><span class="sxs-lookup"><span data-stu-id="4fb80-166">[![image24](the-entity-framework-and-aspnet-getting-started-part-7/_static/image18.png)](the-entity-framework-and-aspnet-getting-started-part-7/_static/image17.png)</span></span>

<span data-ttu-id="4fb80-167">에 **함수 가져오기 추가** 대화 상자의 **반환 된 컬렉션의** 선택 **엔터티**, 선택한 후 `Course` 엔터티 형식으로 반환 합니다.</span><span class="sxs-lookup"><span data-stu-id="4fb80-167">In the **Add Function Import** dialog box, under **Returns a Collection Of** select **Entities**, and then select `Course` as the entity type returned.</span></span> <span data-ttu-id="4fb80-168">완료 되 면 클릭 **확인**합니다.</span><span class="sxs-lookup"><span data-stu-id="4fb80-168">When you're done, click **OK**.</span></span> <span data-ttu-id="4fb80-169">저장 하 고 닫습니다는 *.edmx* 파일입니다.</span><span class="sxs-lookup"><span data-stu-id="4fb80-169">Save and close the *.edmx* file.</span></span>

<span data-ttu-id="4fb80-170">[![image25](the-entity-framework-and-aspnet-getting-started-part-7/_static/image20.png)](the-entity-framework-and-aspnet-getting-started-part-7/_static/image19.png)</span><span class="sxs-lookup"><span data-stu-id="4fb80-170">[![image25](the-entity-framework-and-aspnet-getting-started-part-7/_static/image20.png)](the-entity-framework-and-aspnet-getting-started-part-7/_static/image19.png)</span></span>

## <a name="using-insert-update-and-delete-stored-procedures"></a><span data-ttu-id="4fb80-171">Insert를 사용 하 여, Update 및 Delete 저장된 프로시저</span><span class="sxs-lookup"><span data-stu-id="4fb80-171">Using Insert, Update, and Delete Stored Procedures</span></span>

<span data-ttu-id="4fb80-172">저장된 프로시저를 삽입, 업데이트 및 데이터를 삭제 후에 사용 되는 Entity Framework에서 자동으로 데이터 모델에이 추가 하 고 적절 한 엔터티에 매핑됩니다.</span><span class="sxs-lookup"><span data-stu-id="4fb80-172">Stored procedures to insert, update, and delete data are used by the Entity Framework automatically after you've added them to the data model and mapped them to the appropriate entities.</span></span> <span data-ttu-id="4fb80-173">이제 실행할 수 있습니다는 *StudentsAdd.aspx* 페이지, Entity Framework에서 사용 하 여 새 학생을 만들 때마다는 `InsertStudent` 저장 프로시저에 새 행을 추가 하는 `Student` 테이블입니다.</span><span class="sxs-lookup"><span data-stu-id="4fb80-173">You can now run the *StudentsAdd.aspx* page, and every time you create a new student, the Entity Framework will use the `InsertStudent` stored procedure to add the new row to the `Student` table.</span></span>

<span data-ttu-id="4fb80-174">[![image03](the-entity-framework-and-aspnet-getting-started-part-7/_static/image22.png)](the-entity-framework-and-aspnet-getting-started-part-7/_static/image21.png)</span><span class="sxs-lookup"><span data-stu-id="4fb80-174">[![image03](the-entity-framework-and-aspnet-getting-started-part-7/_static/image22.png)](the-entity-framework-and-aspnet-getting-started-part-7/_static/image21.png)</span></span>

<span data-ttu-id="4fb80-175">실행 된 *Students.aspx* 페이지와 새 학생 목록에 나타납니다.</span><span class="sxs-lookup"><span data-stu-id="4fb80-175">Run the *Students.aspx* page and the new student appears in the list.</span></span>

<span data-ttu-id="4fb80-176">[![image04](the-entity-framework-and-aspnet-getting-started-part-7/_static/image24.png)](the-entity-framework-and-aspnet-getting-started-part-7/_static/image23.png)</span><span class="sxs-lookup"><span data-stu-id="4fb80-176">[![image04](the-entity-framework-and-aspnet-getting-started-part-7/_static/image24.png)](the-entity-framework-and-aspnet-getting-started-part-7/_static/image23.png)</span></span>

<span data-ttu-id="4fb80-177">Update 함수 작동 하는지 확인 하려면 이름을 변경 하 고 삭제 기능 작동 하는지 확인 하려면 학생을 삭제 합니다.</span><span class="sxs-lookup"><span data-stu-id="4fb80-177">Change the name to verify that the update function works, and then delete the student to verify that the delete function works.</span></span>

<span data-ttu-id="4fb80-178">[![image05](the-entity-framework-and-aspnet-getting-started-part-7/_static/image26.png)](the-entity-framework-and-aspnet-getting-started-part-7/_static/image25.png)</span><span class="sxs-lookup"><span data-stu-id="4fb80-178">[![image05](the-entity-framework-and-aspnet-getting-started-part-7/_static/image26.png)](the-entity-framework-and-aspnet-getting-started-part-7/_static/image25.png)</span></span>

## <a name="using-select-stored-procedures"></a><span data-ttu-id="4fb80-179">Select 저장된 프로시저를 사용 하 여</span><span class="sxs-lookup"><span data-stu-id="4fb80-179">Using Select Stored Procedures</span></span>

<span data-ttu-id="4fb80-180">Entity Framework가 자동으로 실행 되지 저장된 프로시저와 같은 `GetCourses`를 사용 하 여 사용할 수 없는 `EntityDataSource` 제어 합니다.</span><span class="sxs-lookup"><span data-stu-id="4fb80-180">The Entity Framework does not automatically run stored procedures such as `GetCourses`, and you cannot use them with the `EntityDataSource` control.</span></span> <span data-ttu-id="4fb80-181">를 사용 하려면 해당 코드에서 호출 합니다.</span><span class="sxs-lookup"><span data-stu-id="4fb80-181">To use them, you call them from code.</span></span>

<span data-ttu-id="4fb80-182">열기는 *InstructorsCourses.aspx.cs* 파일입니다.</span><span class="sxs-lookup"><span data-stu-id="4fb80-182">Open the *InstructorsCourses.aspx.cs* file.</span></span> <span data-ttu-id="4fb80-183">`PopulateDropDownLists` 메서드 LINQ-엔터티 쿼리를 사용 하 여 목록을 반복 하 고 강사에 할당 되는 기능과 및 알림을 할당을 확인 수 있도록 모든 과정 엔터티를 검색 합니다.</span><span class="sxs-lookup"><span data-stu-id="4fb80-183">The `PopulateDropDownLists` method uses a LINQ-to-Entities query to retrieve all course entities so that it can loop through the list and determine which ones an instructor is assigned to and which ones are unassigned:</span></span>

[!code-csharp[Main](the-entity-framework-and-aspnet-getting-started-part-7/samples/sample6.cs)]

<span data-ttu-id="4fb80-184">이 다음 코드로 바꿉니다.</span><span class="sxs-lookup"><span data-stu-id="4fb80-184">Replace this with the following code:</span></span>

[!code-csharp[Main](the-entity-framework-and-aspnet-getting-started-part-7/samples/sample7.cs)]

<span data-ttu-id="4fb80-185">페이지 사용 하 여 이제는 `GetCourses` 모든 과정의 목록을 검색 하는 프로시저를 저장 합니다.</span><span class="sxs-lookup"><span data-stu-id="4fb80-185">The page now uses the `GetCourses` stored procedure to retrieve the list of all courses.</span></span> <span data-ttu-id="4fb80-186">이전 처럼 작동 하는지 확인 하려면 페이지를 실행 합니다.</span><span class="sxs-lookup"><span data-stu-id="4fb80-186">Run the page to verify that it works as it did before.</span></span>

<span data-ttu-id="4fb80-187">(저장된 프로시저에 의해 검색 되는 엔터티의 탐색 속성 하지 자동으로 채워질 수에 따라 이러한 엔터티와 관련 된 데이터 `ObjectContext` 기본 설정 합니다.</span><span class="sxs-lookup"><span data-stu-id="4fb80-187">(Navigation properties of entities retrieved by a stored procedure might not be automatically populated with the data related to those entities, depending on `ObjectContext` default settings.</span></span> <span data-ttu-id="4fb80-188">자세한 내용은 참조 [관련 개체 로드](https://msdn.microsoft.com/en-us/library/bb896272.aspx) MSDN 라이브러리에서.)</span><span class="sxs-lookup"><span data-stu-id="4fb80-188">For more information, see [Loading Related Objects](https://msdn.microsoft.com/en-us/library/bb896272.aspx) in the MSDN Library.)</span></span>

<span data-ttu-id="4fb80-189">다음 자습서에서 프로그램 및 테스트 데이터 서식 및 유효성 검사 규칙을 쉽게 수행할 수 있도록 Dynamic Data 기능을 사용 하는 방법을 설명 합니다.</span><span class="sxs-lookup"><span data-stu-id="4fb80-189">In the next tutorial, you'll learn how to use Dynamic Data functionality to make it easier to program and test data formatting and validation rules.</span></span> <span data-ttu-id="4fb80-190">데이터 형식 문자열 등의 각 웹 페이지 규칙 및는 필드는 필수 여부를 지정 하지 않고 데이터 모델 메타 데이터에 이러한 규칙을 지정할 수 있습니다 및 모든 페이지에 자동으로 적용 합니다.</span><span class="sxs-lookup"><span data-stu-id="4fb80-190">Instead of specifying on each web page rules such as data format strings and whether or not a field is required, you can specify such rules in data model metadata and they're automatically applied on every page.</span></span>

>[!div class="step-by-step"]
<span data-ttu-id="4fb80-191">[이전](the-entity-framework-and-aspnet-getting-started-part-6.md)
[다음](the-entity-framework-and-aspnet-getting-started-part-8.md)</span><span class="sxs-lookup"><span data-stu-id="4fb80-191">[Previous](the-entity-framework-and-aspnet-getting-started-part-6.md)
[Next](the-entity-framework-and-aspnet-getting-started-part-8.md)</span></span>
